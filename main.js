(()=>{"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){for(var r=0;r<e.length;r++){var o=e[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,n(o.key),o)}}function n(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}var r=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=n},(n=[{key:"_showInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.name,"-error"));t.classList.add(this._inputErrorClass),e.textContent=t.validationMessage,e.classList.add(this._errorClass)}},{key:"_hideInputError",value:function(t){var e=this._formElement.querySelector("#".concat(t.name,"-error"));t.classList.remove(this._inputErrorClass),e.classList.remove(this._errorClass),e.textContent=""}},{key:"_checkInputValidity",value:function(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(t){return!t.validity.valid}))}},{key:"_toggleButtonState",value:function(t){(void 0===t?!this._hasInvalidInput():t)?(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.removeAttribute("disabled","")):(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.setAttribute("disabled",""))}},{key:"_setEventListeners",value:function(){var t=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._inputList.forEach((function(e){e.addEventListener("input",(function(){t._checkInputValidity(e),t._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"setDefault",value:function(t){var e=this;this._toggleButtonState(t),this._inputList.forEach((function(t){e._hideInputError(t)}))}}])&&e(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,n}();function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}var a=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._popupElement=document.querySelector(e)},(e=[{key:"open",value:function(){this._popupElement.classList.add("popup_display_opened"),this._setEventListeners()}},{key:"close",value:function(){this._popupElement.classList.remove("popup_display_opened"),this._removeEventListeners()}},{key:"_handleEscClose",value:function(t){"Escape"===t.key&&this.close()}},{key:"_setEventListeners",value:function(){var t=this;this._closeButton=this._popupElement.querySelector(".popup__exit-button"),this._overlay=this._popupElement.querySelector(".popup__overlay"),this._escHandler=function(e){t._handleEscClose(e)},this._overlayHandler=function(){t.close()},this._closeHandler=function(){t.close()},document.addEventListener("keydown",this._escHandler),this._overlay.addEventListener("click",this._overlayHandler),this._closeButton.addEventListener("click",this._closeHandler)}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keydown",this._escHandler),this._overlay.removeEventListener("click",this._overlayHandler),this._closeButton.removeEventListener("click",this._closeHandler)}}])&&i(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,s(r.key),r)}}function s(t){var e=function(t){if("object"!=c(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c(e)?e:e+""}function f(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(f=function(){return!!t})()}function p(t,e,n,r){var o=y(m(1&r?t.prototype:t),e,n);return 2&r&&"function"==typeof o?function(t){return o.apply(n,t)}:o}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},y.apply(null,arguments)}function m(t){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},m(t)}function h(t,e){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},h(t,e)}var _=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e,n){return e=m(e),function(t,e){if(e&&("object"==c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,f()?Reflect.construct(e,n||[],m(t).constructor):e.apply(t,n))}(this,e,[t]))._formSubmitHandler=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&h(t,e)}(e,t),n=e,(r=[{key:"open",value:function(){p(e,"open",this,3)([]),this._form.reset(),this.hideError()}},{key:"_getInputValues",value:function(){var t={};return Array.from(this._popupElement.querySelectorAll("input")).forEach((function(e){t[e.getAttribute("name")]=e.value})),t}},{key:"_setEventListeners",value:function(){var t=this;p(e,"_setEventListeners",this,3)([]),this._errorElement=this._popupElement.querySelector(".popup__form-error"),this._form=this._popupElement.querySelector("form"),this._formHandler=function(e){t._formSubmitHandler(e,t._getInputValues())},this._form.addEventListener("submit",this._formHandler)}},{key:"_removeEventListeners",value:function(){p(e,"_removeEventListeners",this,3)([]),this._form.removeEventListener("submit",this._formHandler)}},{key:"showError",value:function(t){this._errorElement.textContent=t,this._errorElement.classList.add("popup__form-error_display_visible")}},{key:"hideError",value:function(){this._errorElement.textContent="",this._errorElement.classList.remove("popup__form-error_display_visible")}}])&&l(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(a),d={baseUrl:"https://mesto.nomoreparties.co/v1/frontend-st-cohort-201",headers:{authorization:"6e3b2ed8-9aab-4fef-ade6-34f0b119e81e","Content-Type":"application/json"}},v={inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_display_error",inputErrorClass:"popup__input_display_error",errorClass:"popup__input-error_display_show"};function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,S(r.key),r)}}function S(t){var e=function(t){if("object"!=b(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==b(e)?e:e+""}var g=function(){return t=function t(e,n,r,o,i,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardSelector=r,this._handleCardClick=o,this._likeConunt=e.likes.length,this._cardId=e._id,this._likeRenderer=i,this._likes=e.likes,this._cardOwner=e.owner._id,this._deleteRenderer=u,this._userId=n},(e=[{key:"_setAttributes",value:function(){var t=this;this._templateElement=document.querySelector(this._cardSelector).content.cloneNode(!0),this._element=this._templateElement.firstElementChild,this._cardImage=this._templateElement.querySelector(".card__image"),this._cardTitle=this._templateElement.querySelector(".card__title"),this._cardLike=this._templateElement.querySelector(".card__like"),this._cardLikeCount=this._templateElement.querySelector(".card__like-count"),this._cardDelete=this._templateElement.querySelector(".card__delete"),this._cardImage.src=this._link,this._cardTitle.textContent=this._name,this._cardImage.alt=this._name,this._cardLikeCount.textContent=this._likeConunt,this._likes.some((function(e){return e._id===t._userId}))&&this._cardLike.classList.add("card__like_mode_active"),this._cardOwner!==this._userId&&this._cardDelete.remove()}},{key:"_openCard",value:function(){this._handleCardClick(this._link,this._name)}},{key:"updateLikes",value:function(t,e){this._cardLikeCount.textContent=t,this._cardLike.classList.toggle("card__like_mode_active"),this._likes=e}},{key:"deleteElement",value:function(){this._element.remove()}},{key:"getId",value:function(){return this._cardId}},{key:"_setEventListeners",value:function(){var t=this;this._cardImage.addEventListener("click",(function(){t._openCard()})),this._cardLike.addEventListener("click",(function(){t._likeRenderer(t)})),this._cardDelete&&this._cardDelete.addEventListener("click",(function(){t._deleteRenderer(t)}))}},{key:"_generateCard",value:function(){this._setAttributes(),this._setEventListeners()}},{key:"getCard",value:function(){return this._generateCard(),this._templateElement}}])&&E(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function j(t){var e=function(t){if("object"!=w(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}var O=function(){return t=function t(e,n){var r=e.items,o=e.renderer;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._items=r,this._renderer=o,this._containerSelector=n,this._container=document.querySelector(this._containerSelector)},(e=[{key:"addItem",value:function(t){this._container.prepend(t)}},{key:"addInitialItem",value:function(t){this._container.append(t)}},{key:"renderItems",value:function(){var t=this;this._items.forEach((function(e){t._renderer(e)}))}}])&&k(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function C(t){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},C(t)}function P(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,L(r.key),r)}}function L(t){var e=function(t){if("object"!=C(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==C(e)?e:e+""}var I=function(){return t=function t(e){var n=e.nameSelector,r=e.jobSelector,o=e.avatarSelector;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nameElement=document.querySelector(n),this._jobElement=document.querySelector(r),this._avatarElement=document.querySelector(o)},(e=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(t){var e=t.name,n=t.job;this._nameElement.textContent=e,this._jobElement.textContent=n}},{key:"setUserAvatar",value:function(t){this._avatarElement.src=t}}])&&P(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,x(r.key),r)}}function x(t){var e=function(t){if("object"!=T(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==T(e)?e:e+""}function B(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(B=function(){return!!t})()}function D(){return D="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var r=function(t,e){for(;!{}.hasOwnProperty.call(t,e)&&null!==(t=R(t)););return t}(t,e);if(r){var o=Object.getOwnPropertyDescriptor(r,e);return o.get?o.get.call(arguments.length<3?t:n):o.value}},D.apply(null,arguments)}function R(t){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},R(t)}function U(t,e){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},U(t,e)}var H=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=function(t,e,n){return e=R(e),function(t,e){if(e&&("object"==T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,B()?Reflect.construct(e,n||[],R(t).constructor):e.apply(t,n))}(this,e,[t]))._popupImage=n._popupElement.querySelector(".popup__image"),n._popupTitle=n._popupElement.querySelector(".popup__image-title"),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&U(t,e)}(e,t),n=e,r=[{key:"open",value:function(t,n){var r,o,i;this._popupImage.src=t,this._popupTitle.textContent=n,this._popupImage.alt=n,(r=e,o=this,"function"==typeof(i=D(R(1&3?r.prototype:r),"open",o))?function(t){return i.apply(o,t)}:i)([])}}],r&&q(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(a);function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function V(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,N(r.key),r)}}function N(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}function J(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(J=function(){return!!t})()}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}function M(t,e){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},M(t,e)}var F,G,K=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=z(e),function(t,e){if(e&&("object"==A(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,J()?Reflect.construct(e,n||[],z(t).constructor):e.apply(t,n))}(this,e,[t,n])}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&M(t,e)}(e,t),n=e,(r=[{key:"setItem",value:function(t){this._item=t,this._itemId=t.getId()}}])&&V(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(_);function Q(t){return t.ok?t.json():Promise.reject("Ошибка: ".concat(t.status))}var W=new H(".popup_target_img"),X=document.forms.add,Y=document.forms.edit,Z=document.forms.avatar,$=document.querySelector('input[name="forename"]'),tt=document.querySelector('input[name="job"]'),et=new I({nameSelector:".profile__name",jobSelector:".profile__subtitle",avatarSelector:".profile__avatar"}),nt=function(t){return new g(t,F,"#card",(function(t,e){W.open(t,e)}),(function(t){var e,n=this,r=t.getId();return e=this._likes.some((function(t){return t._id===n._userId}))?function(t){return fetch("".concat(d.baseUrl,"/cards/likes/").concat(t),{method:"DELETE",headers:d.headers}).then((function(t){return Q(t)}))}(r):function(t){return fetch("".concat(d.baseUrl,"/cards/likes/").concat(t),{method:"PUT",headers:d.headers}).then((function(t){return Q(t)}))}(r),e.then((function(e){t.updateLikes(e.likes.length,e.likes)})).catch((function(t){console.log(t)}))}),(function(t){ut.setItem(t),ut.open()})).getCard()},rt=new _(".popup_target_add",(function(t,e){var n=this;t.preventDefault(),this._buttonElement=this._popupElement.querySelector(".popup__save"),this._buttonElement.textContent="Создание...";var r=e.title,o=e.url,i=document.createElement("img");i.src=o,i.onload=function(){var t;(t={name:r,link:o},fetch("".concat(d.baseUrl,"/cards"),{method:"POST",headers:d.headers,body:JSON.stringify(t)}).then((function(t){return Q(t)}))).then((function(t){G.addItem(nt(t)),n.close()})).catch((function(t){t.toString().includes("Ошибка:",0)?n.showError(t):n.showError("Невозможно загрузить карточку, попробуйте снова")})).finally((function(){n._buttonElement.textContent="Создать"}))},i.onerror=function(){n.showError("Невозможно загрузить ваше изображение, попробуйте снова"),n._buttonElement.textContent="Создать"}})),ot=new _(".popup_target_edit",(function(t,e){var n,r=this;t.preventDefault(),this._buttonElement=this._popupElement.querySelector(".popup__save"),this._buttonElement.textContent="Сохранение...",(n={name:e.forename,about:e.job},fetch("".concat(d.baseUrl,"/users/me"),{method:"PATCH",headers:d.headers,body:JSON.stringify(n)}).then((function(t){return Q(t)}))).then((function(t){et.setUserInfo({name:t.name,job:t.about}),r.close()})).catch((function(t){t.toString().includes("Ошибка:",0)?r.showError(t):r.showError("Невозможно загрузить данные, попробуйте снова")})).finally((function(){r._buttonElement.textContent="Сохранить"}))})),it=new _(".popup_target_avatar",(function(t,e){var n,r=this;t.preventDefault(),this._buttonElement=this._popupElement.querySelector(".popup__save"),this._buttonElement.textContent="Сохранение...",(n={avatar:e.avatar},fetch("".concat(d.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:d.headers,body:JSON.stringify(n)}).then((function(t){return Q(t)}))).then((function(t){if(t.errors)return Promise.reject("Ошибка: невозможно загрузить данные, ".concat(t.errors.avatar.message,", попробуйте снова"));et.setUserAvatar(t.avatar),r.close()})).catch((function(t){t.toString().includes("Ошибка:",0)?r.showError(t):r.showError("Невозможно загрузить данные, попробуйте снова")})).finally((function(){r._buttonElement.textContent="Сохранить"}))})),ut=new K(".popup_target_delete",(function(t){var e,n=this;t.preventDefault(),this._buttonElement=this._popupElement.querySelector(".popup__save"),this._buttonElement.textContent="Удаление...",(e=this._itemId,fetch("".concat(d.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:d.headers}).then((function(t){return Q(t)}))).then((function(){n._item.deleteElement(),n.close()})).catch((function(t){t.toString().includes("Ошибка:",0)?n.showError(t):n.showError("Невозможно удалить карточку, попробуйте снова")})).finally((function(){n._buttonElement.textContent="Да"}))})),at=document.querySelector(".profile__edit-button"),ct=document.querySelector(".profile__add-button"),lt=document.querySelector(".profile__avatar-overlay"),st=new r(v,X),ft=new r(v,Y),pt=new r(v,Z);Promise.all([fetch("".concat(d.baseUrl,"/cards"),{headers:d.headers}).then((function(t){return Q(t)})),fetch("".concat(d.baseUrl,"/users/me"),{headers:d.headers}).then((function(t){return Q(t)}))]).then((function(t){var e;e=t[1],et.setUserInfo({name:e.name,job:e.about}),et.setUserAvatar(e.avatar),F=e._id,function(t){(G=new O({items:t,renderer:function(t){var e=nt(t);this.addInitialItem(e)}},".card__container")).renderItems()}(t[0])})).catch((function(t){t.toString().includes("Ошибка:",0)?console.log(t):console.log("Не удалось загрузить карточки")})),ft.enableValidation(),st.enableValidation(),pt.enableValidation(),at.addEventListener("click",(function(){var t=et.getUserInfo();ft.setDefault(!0),ot.open(),$.value=t.name,tt.value=t.job})),ct.addEventListener("click",(function(){st.setDefault(!1),rt.open()})),lt.addEventListener("click",(function(){pt.setDefault(!1),it.open()}))})();